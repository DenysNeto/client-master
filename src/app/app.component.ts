import { Component } from '@angular/core';
import { RegistryService } from './services/registry.service';

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss'],
})
export class AppComponent {

  constructor(private RegistryService: RegistryService) {
  }

  data = [];

  ngOnInit() {

    this.data = [{ "id": "db6746ca.3bb998", "type": "tab", "label": "hash password CRM", "disabled": true, "info": "Hash password for user on crm" }, { "id": "c4fb8538.f12b58", "type": "tab", "label": "Add field labels to labels", "disabled": true, "info": "" }, { "id": "1c5bc573.bb5ceb", "type": "tab", "label": "CRM generate 2 step auth", "disabled": true, "info": "" }, { "id": "29474103.b3ff2e", "type": "tab", "label": "robots txt", "disabled": false, "info": "" }, { "id": "1ba13611.ae1c9a", "type": "tab", "label": "security 2 step auth", "disabled": true, "info": "" }, { "id": "cfb4f0df.bbad6", "type": "tab", "label": "bank_ref_id", "disabled": true, "info": "" }, { "id": "f4e05b81.c265a8", "type": "tab", "label": "mobiscroll css", "disabled": false, "info": "" }, { "id": "a6d1dcb.6f0602", "type": "tab", "label": "increase version", "disabled": false, "info": "" }, { "id": "821684bb.91ef98", "type": "tab", "label": "Add Token", "disabled": true, "info": "" }, { "id": "8cb1b57f.b51138", "type": "tab", "label": "asfasf", "disabled": false, "info": "" }, { "id": "697b1fc6.229cd", "type": "tab", "label": "Flow 1", "disabled": false, "info": "" }, { "id": "6554f7ca.486708", "type": "tab", "label": "Flow 2", "disabled": false, "info": "" }, { "id": "7e9b8868.0e5788", "type": "tab", "label": "Flow 3", "disabled": false, "info": "" }, { "id": "cddc4c9.e35f1b", "type": "tab", "label": "action block test", "disabled": false, "info": "" }, { "id": "3442de01.81b042", "type": "tab", "label": "workspace.defaultName", "disabled": false, "info": "" }, { "id": "962e59be.08d978", "type": "tab", "label": "Flow 4", "disabled": false, "info": "" }, { "id": "31e14e4c.223062", "type": "tab", "label": "Flow 5", "disabled": false, "info": "" }, { "id": "6400d7f2.8c558", "type": "subflow", "name": "check logged in", "info": "", "in": [{ "x": 120, "y": 220, "wires": [{ "id": "a1a4acd4.442788" }] }], "out": [] }, { "id": "f6a0c60b.679f38", "type": "subflow", "name": "check site exists", "info": "", "in": [{ "x": 50, "y": 30, "wires": [{ "id": "cae803b6.efeba" }] }], "out": [] }, { "id": "7494d5a2.ac3e6c", "type": "hook-fulfill", "z": "db6746ca.3bb998", "name": "", "x": 690, "y": 140, "wires": [] }, { "id": "c82376e2.ab8328", "type": "function", "z": "db6746ca.3bb998", "name": "hash the password if changed", "func": "var bcrypt = require('bcryptjs');\n\nif (!msg.payload.password) {\n    msg.payload.password = msg.payload._previousDataValues.password;\n    msg.payload._changed.password = false;\n    node.status({text: 'ffffff'})\n    return;\n}\n\n\nif (msg.payload.changed('password')) {\n    node.status({text: msg.payload._changed.password})\n    console.log(msg.payload._previousDataValues.password, msg.payload, 64364)\n    msg.payload.key_email_pending = 'yyyyyyyyy';\n    msg.payload.password = bcrypt.hashSync(msg.payload.password, 8);\n\n}", "outputs": 1, "noerr": 0, "x": 430, "y": 140, "wires": [["7494d5a2.ac3e6c", "e5d30e5.cb110f", "673bf77a.fefd78"]] }, { "id": "a1047a6.fd38788", "type": "http in", "z": "c4fb8538.f12b58", "name": "", "url": "/gggggg", "method": "get", "layout": null, "upload": false, "swaggerDoc": "", "x": 130, "y": 160, "wires": [["f5c632bc.af5fc"]] }, { "id": "e0d0bd67.fce95", "type": "http response", "z": "c4fb8538.f12b58", "name": "", "statusCode": "", "headers": {}, "x": 710, "y": 400, "wires": [] }, { "id": "f5c632bc.af5fc", "type": "function", "z": "c4fb8538.f12b58", "name": "set query", "func": "msg.where = {\n    $and: [\n        {\n            model: {\n                $ne: null\n            },\n            field: {\n                $ne: null\n            }\n        },\n        {\n            model: {\n                $ne: ''\n            },\n            field: {\n                $ne: ''\n            }\n        },\n    ]\n};\nmsg.include = [];", "outputs": 1, "noerr": 0, "x": 260, "y": 240, "wires": [["b99e88d7.a72998"]] }, { "id": "b99e88d7.a72998", "type": "find all", "z": "c4fb8538.f12b58", "name": "", "model": "TranslationNamespace", "where": "", "x": 471, "y": 188, "wires": [["343788ff.14c568"], []] }, { "id": "343788ff.14c568", "type": "async-each", "z": "c4fb8538.f12b58", "name": "loop results", "method": "eachOfSeries", "x": 470, "y": 320, "wires": [["7e2b73b9.09026c"], [], []] }, { "id": "8d2e69db.7a4ce8", "type": "async-each-callback-loop", "z": "c4fb8538.f12b58", "x": 1130, "y": 320, "wires": [] }, { "id": "7e2b73b9.09026c", "type": "function", "z": "c4fb8538.f12b58", "name": "set lookup generic model", "func": "msg.namespace = msg.payload;\n\nmsg.model = msg.namespace.model;\nmsg.where = {};\nmsg.include = [];", "outputs": 1, "noerr": 0, "x": 750, "y": 240, "wires": [["3e4728fa.54b038"]] }, { "id": "3e4728fa.54b038", "type": "find all", "z": "c4fb8538.f12b58", "name": "find generic model", "model": "", "where": "", "x": 970, "y": 180, "wires": [["8d2e69db.7a4ce8", "35e96272.ca46be"], []] }, { "id": "35e96272.ca46be", "type": "async-each", "z": "c4fb8538.f12b58", "name": "", "method": "forEachOf", "x": 1280, "y": 200, "wires": [[], ["e0d0bd67.fce95"], []] }, { "id": "b51a226a.eace3", "type": "async-each-callback-loop", "z": "c4fb8538.f12b58", "x": 1630, "y": 120, "wires": [] }, { "id": "eaed4933.797f4", "type": "http in", "z": "1c5bc573.bb5ceb", "name": "", "url": "/2factor", "method": "get", "layout": null, "upload": false, "swaggerDoc": "", "x": 190, "y": 120, "wires": [["dc21576.cec8128"]] }, { "id": "49cc802.425bc8", "type": "Create Security Key Authenticator", "z": "1c5bc573.bb5ceb", "email": "", "x": 810, "y": 120, "wires": [["9f513b8e.aa6478"], []] }, { "id": "9f513b8e.aa6478", "type": "function", "z": "1c5bc573.bb5ceb", "name": "", "func": "msg.res._res.locals['2stepauth'] = msg.payload;\n\nmsg.next();", "outputs": 1, "noerr": 0, "x": 790, "y": 240, "wires": [[]] }, { "id": "2309dfb1.1da3f8", "type": "http in", "z": "1c5bc573.bb5ceb", "name": "", "url": "/2factor", "method": "post", "layout": null, "upload": false, "swaggerDoc": "", "x": 130, "y": 380, "wires": [["5f3734d5.3640bc"]] }, { "id": "550f35a6.ecf59c", "type": "Code and Key Security Checker", "z": "1c5bc573.bb5ceb", "formattedKey": "", "formattedToken": "", "x": 1010, "y": 280, "wires": [["147bf6f5.4dc7e9"], ["75c8f4ff.7a6bb4"]] }, { "id": "b8a4f192.0d3a8", "type": "change", "z": "1c5bc573.bb5ceb", "name": "", "rules": [{ "t": "set", "p": "formattedKey", "pt": "msg", "to": "payload.seed", "tot": "msg" }, { "t": "set", "p": "formattedToken", "pt": "msg", "to": "payload.code", "tot": "msg" }], "action": "", "property": "", "from": "", "to": "", "reg": false, "x": 700, "y": 320, "wires": [["550f35a6.ecf59c"]] }, { "id": "dc21576.cec8128", "type": "change", "z": "1c5bc573.bb5ceb", "name": "", "rules": [{ "t": "set", "p": "email", "pt": "msg", "to": "req.user.email", "tot": "msg" }], "action": "", "property": "", "from": "", "to": "", "reg": false, "x": 420, "y": 80, "wires": [["93ad8e70.acbb9"]] }, { "id": "a9c5db95.319d08", "type": "alert", "z": "1c5bc573.bb5ceb", "name": "invalid hash", "message_id": "c7616f44-d064-4e11-b253-01f947c17745", "message_type": "danger", "display_type": "notification_toast", "location": "bottom", "x": 530, "y": 500, "wires": [["4f1164a3.6121bc"]] }, { "id": "4f1164a3.6121bc", "type": "redirect", "z": "1c5bc573.bb5ceb", "name": "", "location": "back", "x": 630, "y": 620, "wires": [] }, { "id": "5f3734d5.3640bc", "type": "async-waterfall", "z": "1c5bc573.bb5ceb", "name": "", "outputs": 5, "input_outputs": "3", "x": 340, "y": 380, "wires": [["3e9a98e8.f1c8e8"], ["b8a4f192.0d3a8"], ["48341005.b4fd5"], ["716affe2.13e64"], ["a9c5db95.319d08"]] }, { "id": "75c8f4ff.7a6bb4", "type": "async-waterfall-callback", "z": "1c5bc573.bb5ceb", "name": "", "callback_type": "error", "x": 1390, "y": 340, "wires": [] }, { "id": "147bf6f5.4dc7e9", "type": "async-waterfall-callback", "z": "1c5bc573.bb5ceb", "name": "", "callback_type": "success", "x": 1406.2666320800781, "y": 257.51666259765625, "wires": [] }, { "id": "a1a4acd4.442788", "type": "function", "z": "6400d7f2.8c558", "name": "check logged in", "func": "if (msg.req.user){\n    return [msg , null];\n}\n return [null , msg];", "outputs": "2", "noerr": 0, "x": 360, "y": 240, "wires": [["6c7ecbbe.a163cc"], ["26eb1726.1ab26"]] }, { "id": "6c7ecbbe.a163cc", "type": "async-waterfall-callback", "z": "6400d7f2.8c558", "name": "", "callback_type": "success", "x": 684.5, "y": 210, "wires": [] }, { "id": "26eb1726.1ab26", "type": "async-waterfall-callback", "z": "6400d7f2.8c558", "name": "", "callback_type": "error", "x": 649.5, "y": 320, "wires": [] }, { "id": "3e9a98e8.f1c8e8", "type": "subflow:6400d7f2.8c558", "z": "1c5bc573.bb5ceb", "name": "", "x": 580, "y": 240, "wires": [] }, { "id": "48341005.b4fd5", "type": "sequelizejs", "z": "1c5bc573.bb5ceb", "mode": "workflow", "name": "fine user", "model": "User", "raw_flag": false, "config": "{\"base\":{\"model\":\"User\",\"query\":{\"condition\":\"AND\",\"rules\":[{\"id\":\"id\",\"field\":\"id\",\"type\":\"integer\",\"operator\":\"equal\",\"value\":\"msg.~~~req.user.id\"}],\"valid\":false},\"mode\":\"findOne\",\"fields\":[{\"field\":\"User.id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.created_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.updated_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.first_name\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.last_name\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.password\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.is_admin\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.email\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.status\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.photo\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.description\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.title\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.department\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.phone_work\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.extension\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.fax_number\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.address\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.city\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.country\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.postal_code\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.config\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.authentication_token\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.two_factor_authentication\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.deleted_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.site_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"}]},\"rels\":{}}", "x": 560, "y": 380, "wires": [["542b2eec.f9e02"], ["65a9e7c4.ff838"]] }, { "id": "65a9e7c4.ff838", "type": "async-waterfall-callback", "z": "1c5bc573.bb5ceb", "name": "", "callback_type": "error", "x": 770, "y": 420, "wires": [] }, { "id": "711175f3.f2c434", "type": "async-waterfall-callback", "z": "1c5bc573.bb5ceb", "name": "", "callback_type": "success", "x": 1003.6833801269531, "y": 326.4166564941406, "wires": [] }, { "id": "542b2eec.f9e02", "type": "function", "z": "1c5bc573.bb5ceb", "name": "set user data", "func": "msg.payload.authentication_token = msg.formattedKey;\nmsg.payload.two_factor_authentication = true;\n\nmsg.payload.save().then(function() {\n    node.send(msg);\n})\n\nreturn [null];", "outputs": 1, "noerr": 0, "x": 790, "y": 360, "wires": [["711175f3.f2c434"]] }, { "id": "716affe2.13e64", "type": "alert", "z": "1c5bc573.bb5ceb", "name": "invalid hash", "message_id": "c7616f44-d064-4e11-b253-01f947c17745", "message_type": "success", "display_type": "notification_toast", "location": "bottom", "x": 570, "y": 440, "wires": [["3f7f196d.61ac46"]] }, { "id": "3f7f196d.61ac46", "type": "redirect", "z": "1c5bc573.bb5ceb", "name": "redirect home", "location": "/", "x": 766, "y": 488, "wires": [] }, { "id": "93ad8e70.acbb9", "type": "function", "z": "1c5bc573.bb5ceb", "name": "", "func": "\nmsg.name = [msg.req.user.email, msg.req.headers.host].join('@')\n\nnode.status({text: msg.name});\n", "outputs": 1, "noerr": 0, "x": 610, "y": 100, "wires": [["49cc802.425bc8"]] }, { "id": "6733c087.949c", "type": "http in", "z": "29474103.b3ff2e", "name": "", "url": "/cms/:site/robots.txt", "method": "get", "layout": null, "upload": false, "swaggerDoc": "", "x": 130, "y": 200, "wires": [["81db35d3.31de98"]] }, { "id": "f5e66d5.0a08a9", "type": "template", "z": "29474103.b3ff2e", "name": "", "field": "payload", "fieldType": "msg", "format": "handlebars", "syntax": "mustache", "template": "User-agent: *\nDisallow: /", "output": "str", "template_type": "", "template_id": null, "language": null, "x": 250, "y": 460, "wires": [["395acdbd.b96572"]] }, { "id": "395acdbd.b96572", "type": "http response", "z": "29474103.b3ff2e", "name": "", "statusCode": "", "headers": {}, "x": 670, "y": 340, "wires": [] }, { "id": "cae803b6.efeba", "type": "function", "z": "f6a0c60b.679f38", "name": "set lookup", "func": "msg.where = {url: msg.req.params.site};\nmsg.include = ['Site'];", "outputs": 1, "noerr": 0, "x": 150, "y": 160, "wires": [["686641de.ea0e7"]] }, { "id": "686641de.ea0e7", "type": "find", "z": "f6a0c60b.679f38", "name": "get site", "model": "App", "where": "", "x": 300, "y": 220, "wires": [["725612d7.2cd13c"], ["b12de8b4.104088"]] }, { "id": "725612d7.2cd13c", "type": "function", "z": "f6a0c60b.679f38", "name": "set user payload", "func": "if (!msg.payload) {\n    return [null, msg];\n}\n\nmsg.site = msg.payload.Site;\nmsg.app = msg.payload;\n\nif (msg.site) {\n    return [msg, null];\n}\n\nreturn [null, msg];", "outputs": "2", "noerr": 0, "x": 460, "y": 340, "wires": [["270f983a.7f63c8"], ["b12de8b4.104088"]], "outputLabels": ["has user", "no user"] }, { "id": "b12de8b4.104088", "type": "async-waterfall-callback", "z": "f6a0c60b.679f38", "name": "", "callback_type": "error", "x": 666, "y": 174, "wires": [] }, { "id": "270f983a.7f63c8", "type": "async-waterfall-callback", "z": "f6a0c60b.679f38", "name": "", "callback_type": "success", "x": 680, "y": 400, "wires": [] }, { "id": "81db35d3.31de98", "type": "async-waterfall", "z": "29474103.b3ff2e", "name": "", "outputs": 4, "input_outputs": "2", "x": 360, "y": 280, "wires": [["94ce9054.a297a"], ["596acef5.353ee"], ["224525fa.4413ca"], ["f5e66d5.0a08a9"]] }, { "id": "224525fa.4413ca", "type": "template", "z": "29474103.b3ff2e", "name": "", "field": "payload", "fieldType": "msg", "format": "handlebars", "syntax": "mustache", "template": "User-agent: *", "output": "str", "template_type": "", "template_id": null, "language": null, "x": 630, "y": 460, "wires": [["395acdbd.b96572"]] }, { "id": "94ce9054.a297a", "type": "subflow:f6a0c60b.679f38", "z": "29474103.b3ff2e", "name": "", "x": 560, "y": 182, "wires": [] }, { "id": "596acef5.353ee", "type": "function", "z": "29474103.b3ff2e", "name": "", "func": "if (msg.app.active_seo) {\n    return [msg, null];\n} else {\n    return [null, msg];\n}\n", "outputs": "2", "noerr": 0, "x": 553, "y": 269, "wires": [["e3f91f70.9f361"], ["d295653c.a77ff8"]], "outputLabels": ["active seo", "not active seo"] }, { "id": "e3f91f70.9f361", "type": "async-waterfall-callback", "z": "29474103.b3ff2e", "name": "", "callback_type": "success", "x": 696, "y": 130, "wires": [] }, { "id": "d295653c.a77ff8", "type": "async-waterfall-callback", "z": "29474103.b3ff2e", "name": "", "callback_type": "error", "x": 710, "y": 260, "wires": [] }, { "id": "8bed7524.42e818", "type": "http in", "z": "1ba13611.ae1c9a", "name": "", "url": "/cms/:site/security", "method": "get", "layout": null, "upload": false, "must_log_in": false, "verify_captcha": false, "security_enabled": false, "swaggerDoc": "", "x": 165, "y": 107, "wires": [["fa42fc6c.4e083"]] }, { "id": "486c8cca.d2f164", "type": "Create Security Key Authenticator", "z": "1ba13611.ae1c9a", "email": "", "x": 399, "y": 155, "wires": [["67cd7b58.f46ec4"], []] }, { "id": "67cd7b58.f46ec4", "type": "function", "z": "1ba13611.ae1c9a", "name": "", "func": "msg.res._res.locals.cms['2stepauth'] = msg.payload;\n\nmsg.next();", "outputs": 1, "noerr": 0, "x": 966, "y": 57, "wires": [[]] }, { "id": "252ec47d.d2e5dc", "type": "http in", "z": "1ba13611.ae1c9a", "name": "", "url": "/cms/:site/security/set-google-authenticator", "method": "post", "layout": null, "upload": false, "must_log_in": true, "verify_captcha": false, "security_enabled": false, "security_type": "Login", "swaggerDoc": "", "x": 186, "y": 259, "wires": [["2e0881fe.f5611e"]] }, { "id": "b4132624.ae4398", "type": "Code and Key Security Checker", "z": "1ba13611.ae1c9a", "formattedKey": "", "formattedToken": "", "x": 955, "y": 267, "wires": [["db86d686.8aba88"], ["c7f2af02.3c362"]] }, { "id": "f8fed22a.8d4f5", "type": "change", "z": "1ba13611.ae1c9a", "name": "", "rules": [{ "t": "set", "p": "formattedKey", "pt": "msg", "to": "payload.seed", "tot": "msg" }, { "t": "set", "p": "formattedToken", "pt": "msg", "to": "payload.code", "tot": "msg" }], "action": "", "property": "", "from": "", "to": "", "reg": false, "x": 645, "y": 307, "wires": [["b4132624.ae4398"]] }, { "id": "fa42fc6c.4e083", "type": "change", "z": "1ba13611.ae1c9a", "name": "", "rules": [{ "t": "set", "p": "email", "pt": "msg", "to": "req.user.email", "tot": "msg" }], "action": "", "property": "", "from": "", "to": "", "reg": false, "x": 365, "y": 67, "wires": [["2b4377ab.08d728"]] }, { "id": "b6a5029d.30512", "type": "alert", "z": "1ba13611.ae1c9a", "name": "invalid hash", "message_id": "c7616f44-d064-4e11-b253-01f947c17745", "message_type": "danger", "display_type": "notification_toast", "location": "bottom", "x": 475, "y": 487, "wires": [["e892269e.61c6c8"]] }, { "id": "e892269e.61c6c8", "type": "redirect", "z": "1ba13611.ae1c9a", "name": "", "location": "back", "x": 575, "y": 607, "wires": [] }, { "id": "2e0881fe.f5611e", "type": "async-waterfall", "z": "1ba13611.ae1c9a", "name": "", "outputs": 4, "input_outputs": "2", "x": 285, "y": 367, "wires": [["f8fed22a.8d4f5"], ["92c39aea.2a3f48"], ["5b43455c.6f98ec"], ["b6a5029d.30512"]] }, { "id": "c7f2af02.3c362", "type": "async-waterfall-callback", "z": "1ba13611.ae1c9a", "name": "", "callback_type": "error", "x": 1335, "y": 327, "wires": [] }, { "id": "db86d686.8aba88", "type": "async-waterfall-callback", "z": "1ba13611.ae1c9a", "name": "", "callback_type": "success", "x": 1351.2666320800781, "y": 244.51666259765625, "wires": [] }, { "id": "92c39aea.2a3f48", "type": "sequelizejs", "z": "1ba13611.ae1c9a", "mode": "workflow", "name": "fine user", "model": "User", "raw_flag": false, "output_name": "", "config": "{\"base\":{\"model\":\"User\",\"query\":{\"condition\":\"AND\",\"rules\":[{\"id\":\"id\",\"field\":\"id\",\"type\":\"integer\",\"operator\":\"equal\",\"value\":\"msg.~~~req.user.id\"}],\"valid\":false},\"mode\":\"findOne\",\"fields\":[{\"field\":\"User.id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.created_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.updated_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.first_name\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.last_name\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.password\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.is_admin\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.email\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.status\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.photo\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.description\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.title\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.department\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.phone_work\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.extension\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.fax_number\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.address\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.city\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.country\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.postal_code\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.config\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.authentication_token\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.two_factor_authentication\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.deleted_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"User.site_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"}]},\"rels\":{}}", "x": 505, "y": 367, "wires": [["d2ba50e8.98bff"], ["13523fff.6f4a8"]] }, { "id": "13523fff.6f4a8", "type": "async-waterfall-callback", "z": "1ba13611.ae1c9a", "name": "", "callback_type": "error", "x": 715, "y": 407, "wires": [] }, { "id": "e9fd8434.4dd8d8", "type": "async-waterfall-callback", "z": "1ba13611.ae1c9a", "name": "", "callback_type": "success", "x": 948.6833801269531, "y": 313.4166564941406, "wires": [] }, { "id": "d2ba50e8.98bff", "type": "function", "z": "1ba13611.ae1c9a", "name": "set user data", "func": "msg.payload.authentication_token = msg.formattedKey;\nmsg.payload.two_factor_authentication = true;\n\nmsg.payload.save().then(function() {\n    node.send(msg);\n})\n\nreturn [null];", "outputs": 1, "noerr": 0, "x": 735, "y": 347, "wires": [["e9fd8434.4dd8d8"]] }, { "id": "5b43455c.6f98ec", "type": "alert", "z": "1ba13611.ae1c9a", "name": "invalid hash", "message_id": "c7616f44-d064-4e11-b253-01f947c17745", "message_type": "success", "display_type": "notification_toast", "location": "bottom", "x": 515, "y": 427, "wires": [["a0777cad.5df38"]] }, { "id": "a0777cad.5df38", "type": "redirect", "z": "1ba13611.ae1c9a", "name": "redirect home", "location": "/", "x": 711, "y": 475, "wires": [] }, { "id": "2b4377ab.08d728", "type": "function", "z": "1ba13611.ae1c9a", "name": "", "func": "\nmsg.name = [msg.req.user.email, msg.req.headers.host].join('@')\n\nnode.status({text: msg.name});\n", "outputs": 1, "noerr": 0, "x": 555, "y": 87, "wires": [["486c8cca.d2f164"]] }, { "id": "5225ee8c.a649b", "type": "hook", "z": "cfb4f0df.bbad6", "name": "", "model": "Account", "hook": "afterCreate", "populate": [], "changed_fields": [], "output_name": "", "is_transaction": false, "x": 206.1909637451172, "y": 131.22570037841797, "wires": [["e11df48d.42c098"]] }, { "id": "4214b516.5cd6ac", "type": "http in", "z": "f4e05b81.c265a8", "name": "", "url": "/cms/:site/css/mobiscroll.angularjs.min.css", "method": "get", "layout": null, "upload": false, "must_log_in": false, "must_be_active_account": false, "verify_captcha": false, "security_enabled": false, "security_type": "", "swaggerDoc": "", "x": 337.1484375, "y": 239.73047161102295, "wires": [["c7545098.c88c5"]] }, { "id": "ea477d2e.7b50a", "type": "http response", "z": "f4e05b81.c265a8", "name": "", "statusCode": "", "headers": {}, "x": 1088.1445274353027, "y": 53.488282203674316, "wires": [] }, { "id": "c7545098.c88c5", "type": "sequelizejs", "z": "f4e05b81.c265a8", "mode": "workflow", "name": "get mobiscroll css", "model": "App", "raw_flag": false, "update_or_create_field": "", "output_name": "", "config": "{\"base\":{\"model\":\"App\",\"query\":{\"condition\":\"AND\",\"rules\":[{\"id\":\"id\",\"field\":\"id\",\"type\":\"integer\",\"operator\":\"equal\",\"value\":\"number~~~111~~~\"}],\"valid\":false},\"mode\":\"findOne\",\"fields\":[{\"field\":\"App.id\",\"enabled\":true,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.created_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.updated_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.name\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.description\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.os\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.url\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.css\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.editor_settings\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.type\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.active_seo\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.loader_html\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.loader_css\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.is_amp\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.schema\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.deleted_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.site_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.assigned_to_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.created_by_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.language_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.page_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.active_css_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.css_draft_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.favicon_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"App.logo_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"CssBackup.id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\",\"as\":\"ActiveCss\"},{\"field\":\"CssBackup.created_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\",\"as\":\"ActiveCss\"},{\"field\":\"CssBackup.updated_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\",\"as\":\"ActiveCss\"},{\"field\":\"CssBackup.css\",\"enabled\":true,\"group_by\":false,\"operation\":\"none\",\"as\":\"ActiveCss\"},{\"field\":\"CssBackup.name\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\",\"as\":\"ActiveCss\"},{\"field\":\"CssBackup.deleted_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\",\"as\":\"ActiveCss\"},{\"field\":\"CssBackup.app_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\",\"as\":\"ActiveCss\"},{\"field\":\"CssBackup.site_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\",\"as\":\"ActiveCss\"},{\"field\":\"CssBackup.assigned_to_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\",\"as\":\"ActiveCss\"},{\"field\":\"CssBackup.created_by_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\",\"as\":\"ActiveCss\"}]},\"rels\":{\"CssBackup_ActiveCss\":{\"alias\":\"ActiveCss\",\"query\":{\"condition\":\"AND\",\"rules\":[],\"valid\":true},\"required\":true}}}", "x": 644.1484680175781, "y": 136.83594208955765, "wires": [["3d857ad6.da8446"], []] }, { "id": "3d857ad6.da8446", "type": "change", "z": "f4e05b81.c265a8", "name": "", "rules": [{ "t": "set", "p": "payload", "pt": "msg", "to": "payload.ActiveCss.css", "tot": "msg" }], "action": "", "property": "", "from": "", "to": "", "reg": false, "x": 896.1367950439453, "y": 66.79688167572021, "wires": [["ea477d2e.7b50a"]] }, { "id": "e11df48d.42c098", "type": "function", "z": "cfb4f0df.bbad6", "name": "+ 10000", "func": "msg.payload.bank_ref_id = require('sequelize').literal(`Concat('OP', id + 100000)`);\nmsg.payload.save({logging: function(a) { node.error({text: a}) }}).then(function(aa) {\n    msg.payload = aa;\n    node.send(msg);\n}).catch(function(err){ node.error(err) })\n\nreturn [null];", "outputs": 1, "noerr": 0, "x": 460, "y": 360, "wires": [["99e1358c.f79918"]] }, { "id": "99e1358c.f79918", "type": "hook-fulfill", "z": "cfb4f0df.bbad6", "name": "", "x": 712.1805572509766, "y": 93.60416412353516, "wires": [] }, { "id": "e15dfea6.38cd5", "type": "hook", "z": "a6d1dcb.6f0602", "name": "", "model": "App", "hook": "beforeUpdate", "populate": [], "changed_fields": [], "output_name": "", "is_transaction": "", "x": 180.1840362548828, "y": 194.97570037841797, "wires": [["ad9e9f83.f171f"]] }, { "id": "72e56c6f.e7edc4", "type": "hook-fulfill", "z": "a6d1dcb.6f0602", "name": "", "message": "", "x": 660, "y": 200, "wires": [] }, { "id": "ad9e9f83.f171f", "type": "function", "z": "a6d1dcb.6f0602", "name": "increase version number", "func": "msg.payload.version = msg.payload.version || 0;\nmsg.payload.version += 1;\n", "outputs": 1, "noerr": 0, "x": 429.19444274902344, "y": 136.12152862548828, "wires": [["72e56c6f.e7edc4"]] }, { "id": "c1003a6d.4631e8", "type": "hook", "z": "db6746ca.3bb998", "name": "Hash password USER CRM", "model": "User", "hook": "beforeUpdate", "populate": [], "changed_fields": ["password"], "output_name": "", "is_transaction": false, "x": 160, "y": 220, "wires": [["c82376e2.ab8328"]] }, { "id": "673bf77a.fefd78", "type": "debug", "z": "db6746ca.3bb998", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload.dataValues", "x": 700, "y": 60, "wires": [] }, { "id": "e5d30e5.cb110f", "type": "debug", "z": "db6746ca.3bb998", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "msg.payload._changed", "x": 800, "y": 232, "wires": [] }, { "id": "e335683a.277ca8", "type": "hook", "z": "db6746ca.3bb998", "name": "Hash password Account CRM", "model": "Account", "hook": "beforeUpdate", "populate": [], "changed_fields": ["password"], "output_name": "", "is_transaction": "", "x": 180, "y": 60, "wires": [["c82376e2.ab8328"]] }, { "id": "3b68ce4b.5eb5c2", "type": "http in", "z": "821684bb.91ef98", "name": "", "model": "", "required_fields": [], "available_fields": [], "url": "/cms/:site/update-token", "api_url": "", "api_output": "{}", "method": "post", "layout": "", "upload": false, "must_log_in": true, "must_be_active_account": false, "verify_captcha": false, "security_enabled": false, "api_enabled": false, "api_category": "", "description": "", "security_type": "", "swaggerDoc": "", "x": 180, "y": 200, "wires": [["e861b917.7a4908", "6590d201.f5851c", "8d242fd7.9d878"]] }, { "id": "e861b917.7a4908", "type": "sequelizejs", "z": "821684bb.91ef98", "mode": "workflow", "name": "update or create push token", "model": "PushToken", "raw_flag": false, "update_or_create_field": "token", "output_name": "", "config": "{\"base\":{\"model\":\"PushToken\",\"query\":{\"condition\":\"AND\",\"rules\":[{\"id\":\"token\",\"field\":\"token\",\"type\":\"string\",\"operator\":\"equal\",\"value\":\"msg.~~~req.body.token~~~\"},{\"id\":\"account_id\",\"field\":\"account_id\",\"type\":\"string\",\"operator\":\"equal\",\"value\":\"msg.~~~req.user.id~~~\"},{\"id\":\"device_cordova\",\"field\":\"device_cordova\",\"type\":\"string\",\"operator\":\"equal\",\"value\":\"msg.~~~payload.device_cordova~~~\"},{\"id\":\"device_isVirtual\",\"field\":\"device_isVirtual\",\"type\":\"boolean\",\"operator\":\"equal\",\"value\":\"msg.~~~payload.device_isVirtual~~~\"},{\"id\":\"device_manufacturer\",\"field\":\"device_manufacturer\",\"type\":\"string\",\"operator\":\"equal\",\"value\":\"msg.~~~payload.device_manufacturer~~~\"},{\"id\":\"device_model\",\"field\":\"device_model\",\"type\":\"string\",\"operator\":\"equal\",\"value\":\"msg.~~~payload.device_model~~~\"},{\"id\":\"device_platform\",\"field\":\"device_platform\",\"type\":\"string\",\"operator\":\"equal\",\"value\":\"msg.~~~payload.device_platform~~~\"},{\"id\":\"device_serial\",\"field\":\"device_serial\",\"type\":\"string\",\"operator\":\"equal\",\"value\":\"msg.~~~payload.device_serial~~~\"},{\"id\":\"device_uuid\",\"field\":\"device_uuid\",\"type\":\"string\",\"operator\":\"equal\",\"value\":\"msg.~~~payload.device_uuid~~~\"},{\"id\":\"device_version\",\"field\":\"device_version\",\"type\":\"string\",\"operator\":\"equal\",\"value\":\"msg.~~~payload.device_version~~~\"}],\"valid\":false},\"mode\":\"updateOrCreate\",\"fields\":[{\"field\":\"PushToken.id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.created_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.updated_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.token\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.device_cordova\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.device_model\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.device_platform\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.device_uuid\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.device_manufacturer\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.device_version\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.device_isVirtual\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.device_serial\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.deleted_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.account_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.site_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.assigned_to_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.created_by_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"PushToken.created_by_account_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"}]},\"rels\":{}}", "x": 460, "y": 140, "wires": [["59c7df4f.93abc", "1d89de4f.0ad3e2"], []] }, { "id": "59c7df4f.93abc", "type": "http response", "z": "821684bb.91ef98", "name": "", "statusCode": "", "headers": {}, "output_name": "payload", "x": 700, "y": 111, "wires": [] }, { "id": "41c36c8a.333b74", "type": "firebase-notification", "z": "821684bb.91ef98", "name": "", "input_name": "", "badge": "", "title": "", "body": "", "clickAction": "", "color": "", "icon": "", "sound": "", "tag": "", "token": "", "custom": [{ "active": true, "key": "", "value_type": "", "value": "", "description": "" }], "x": 508, "y": 328, "wires": [[], []] }, { "id": "6590d201.f5851c", "type": "debug", "z": "821684bb.91ef98", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "req.body.token", "x": 459, "y": 211, "wires": [] }, { "id": "8d242fd7.9d878", "type": "debug", "z": "821684bb.91ef98", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload.token", "x": 460, "y": 260, "wires": [] }, { "id": "1d89de4f.0ad3e2", "type": "debug", "z": "821684bb.91ef98", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "x": 699, "y": 59, "wires": [] }, { "id": "a788c025.5a651", "type": "http in", "z": "821684bb.91ef98", "name": "", "model": "", "required_fields": [], "available_fields": [], "url": "/cms/:site/update-token", "api_url": "", "api_output": "{}", "method": "get", "layout": "", "upload": false, "must_log_in": true, "must_be_active_account": false, "verify_captcha": false, "security_enabled": false, "api_enabled": false, "api_category": "", "description": "", "security_type": "", "swaggerDoc": "", "x": 180, "y": 420, "wires": [["de639a83.8839b8"]] }, { "id": "802d0434.5fd1c8", "type": "http response", "z": "821684bb.91ef98", "name": "", "statusCode": "", "headers": {}, "output_name": "payload", "x": 770, "y": 420, "wires": [] }, { "id": "de639a83.8839b8", "type": "change", "z": "821684bb.91ef98", "name": "", "rules": [{ "t": "set", "p": "payload", "pt": "msg", "to": "req.user", "tot": "msg" }], "action": "", "property": "", "from": "", "to": "", "reg": false, "x": 540, "y": 440, "wires": [["802d0434.5fd1c8"]] }, { "id": "d9ee2086.207dc", "type": "hook", "z": "a6d1dcb.6f0602", "name": "", "model": "CssScript", "hook": "beforeUpdate", "populate": [], "changed_fields": [], "output_name": "", "is_transaction": "", "x": 160, "y": 100, "wires": [["ad9e9f83.f171f"]] }, { "id": "4a509b0.341de64", "type": "hook", "z": "a6d1dcb.6f0602", "name": "", "model": "Scriptj", "hook": "beforeUpdate", "populate": [], "changed_fields": [], "output_name": "", "is_transaction": "", "x": 190, "y": 260, "wires": [["ad9e9f83.f171f"]] }, { "id": "34cbb315.7bdd1c", "type": "hook", "z": "db6746ca.3bb998", "name": "Hash password Account CRM", "model": "Account", "hook": "beforeCreate", "populate": [], "changed_fields": ["password"], "output_name": "", "is_transaction": "", "x": 140, "y": 140, "wires": [["c82376e2.ab8328"]] }, { "id": "6b686023.02861", "type": "advanced-conditions", "z": "db6746ca.3bb998", "name": "hdfhafad1sh", "rules": [{ "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "gggd", "open_output_type": false, "output_type": "string", "comparison": "eq", "input": "payload" }, { "open_input_source": false, "input_source": "msg", "output": "sdfgsdfgsdfg", "open_output_type": false, "output_type": "msg", "comparison": "eq", "input": "payload" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "sdfgsdfgsdgsdfg", "open_output_type": false, "output_type": "msg", "comparison": "eq", "input": "sdfgdsfg" }, { "open_input_source": false, "input_source": "msg", "output": "", "open_output_type": false, "output_type": "number", "comparison": "eq", "input": "payload" }, { "open_input_source": false, "input_source": "msg", "output": "", "open_output_type": false, "output_type": "msg", "comparison": "eq", "input": "payload" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "", "open_output_type": false, "output_type": "msg", "comparison": "eq", "input": "payload" }, { "open_input_source": false, "input_source": "msg", "output": "", "open_output_type": false, "output_type": "msg", "comparison": "eq", "input": "payload" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "ggg", "open_output_type": false, "output_type": "string", "comparison": "eq", "input": "payload" }], "type": "and" }], "outputs": 4, "x": 450, "y": 500, "wires": [["c70be70f.4fff18"], ["719cddcc.9692c4"], ["cb2cb8e5.3407f8"], ["681a6ad4.178ba4"]] }, { "id": "46ef7129.df4a9", "type": "switch", "z": "db6746ca.3bb998", "name": "", "property": "payload", "propertyType": "msg", "rules": [{ "t": "eq", "v": "", "vt": "str" }], "checkall": "true", "outputs": 1, "x": 490, "y": 380, "wires": [[]] }, { "id": "c70be70f.4fff18", "type": "debug", "z": "db6746ca.3bb998", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 780, "y": 440, "wires": [] }, { "id": "719cddcc.9692c4", "type": "debug", "z": "db6746ca.3bb998", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 780, "y": 500, "wires": [] }, { "id": "c27a808.34b328", "type": "inject", "z": "db6746ca.3bb998", "name": "", "topic": "", "payload": "ggg", "payloadType": "str", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 210, "y": 520, "wires": [["5a0c982e.f0b028", "6b686023.02861"]] }, { "id": "cb2cb8e5.3407f8", "type": "debug", "z": "db6746ca.3bb998", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 780, "y": 560, "wires": [] }, { "id": "681a6ad4.178ba4", "type": "debug", "z": "db6746ca.3bb998", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 800, "y": 640, "wires": [] }, { "id": "8a69f992.1bced8", "type": "inject", "z": "db6746ca.3bb998", "name": "", "topic": "", "payload": "ggg", "payloadType": "str", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 270, "y": 400, "wires": [["c70be70f.4fff18"]] }, { "id": "5a0c982e.f0b028", "type": "debug", "z": "db6746ca.3bb998", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 440, "y": 620, "wires": [] }, { "id": "ae7e679b.413318", "type": "hook", "z": "697b1fc6.229cd", "name": "", "model": "Account", "hook": "afterUpdate", "populate": [], "changed_fields": [], "output_name": "aaa", "is_transaction": "", "after_transaction_commit": true, "x": 470, "y": 280, "wires": [["84b9447d.335518", "dfef2182.59db2"]] }, { "id": "149b79a8.282926", "type": "inject", "z": "697b1fc6.229cd", "name": "", "topic": "", "output_name": "aaa", "payload": "", "payloadType": "date", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 690, "y": 240, "wires": [["84b9447d.335518"]] }, { "id": "84b9447d.335518", "type": "debug", "z": "697b1fc6.229cd", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "aaa", "targetType": "msg", "x": 1010, "y": 440, "wires": [] }, { "id": "42d3d3b5.34ebfc", "type": "sequelizejs", "z": "697b1fc6.229cd", "mode": "workflow", "name": "", "model": "", "raw_flag": false, "update_or_create_field": "", "output_name": "", "input_name": "", "config": "{}", "output_settings": {}, "x": 360, "y": 600, "wires": [[], []] }, { "id": "dfef2182.59db2", "type": "debug", "z": "697b1fc6.229cd", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "aaaaaaaaaaa", "targetType": "msg", "x": 1020, "y": 520, "wires": [] }, { "id": "f4d5c2f5.7e0d", "type": "sequelizejs", "z": "697b1fc6.229cd", "mode": "workflow", "name": "Test Query Json", "model": "Fitoficredit", "raw_flag": false, "update_or_create_field": "", "output_name": "", "input_name": "", "config": "{\"base\":{\"model\":\"Fitoficredit\",\"query\":{\"condition\":\"AND\",\"rules\":[{\"id\":\"message\",\"field\":\"message\",\"type\":\"string\",\"operator\":\"contains\",\"value\":\"json~~~{\\\"PmtId\\\": [{\\\"InstrId\\\": [\\\"O192910019289590\\\"]}]}~~~\"}],\"valid\":true},\"mode\":\"findOne\",\"fields\":[{\"field\":\"Fitoficredit.id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"Fitoficredit.created_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"Fitoficredit.updated_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"Fitoficredit.message\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"Fitoficredit.deleted_at\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"Fitoficredit.site_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"Fitoficredit.assigned_to_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"Fitoficredit.created_by_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"Fitoficredit.created_by_account_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"},{\"field\":\"Fitoficredit.msgcoresystembanking_id\",\"enabled\":false,\"group_by\":false,\"operation\":\"none\"}]},\"rels\":{}}", "output_settings": {}, "x": 560, "y": 80, "wires": [["1861269e.b3e819"], ["60514233.8d78fc"]] }, { "id": "a252eba8.0eba98", "type": "inject", "z": "697b1fc6.229cd", "name": "", "topic": "", "output_name": "", "payload": "", "payloadType": "date", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 200, "y": 160, "wires": [["f4d5c2f5.7e0d"]] }, { "id": "1861269e.b3e819", "type": "debug", "z": "697b1fc6.229cd", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload.dataValues", "targetType": "msg", "x": 1020, "y": 40, "wires": [] }, { "id": "44fb1ffe.4c249", "type": "function", "z": "697b1fc6.229cd", "name": "", "func": "\n\n\n\n\n\n\n\n\n\n\n/*msg.custom_sequelizejs = {\n    extra_where: {\n        $and: [\n            {\n                \"message.hello\": {[require('sequelize').Op.ne]: \"123\"},\n            }\n        ],\n        $or: [\n        ],\n    }\n}*/\n\nmsg.custom_sequelizejs = {\n    extra_where: {\n        $and: [\n            {\n                \"message\": {$contains: {\"PmtId\": [{\"InstrId\": [\"O192910019289590\"]}]}},\n            }\n        ],\n        $or: [\n        ],\n    }\n}\n", "outputs": 1, "noerr": 0, "x": 470, "y": 240, "wires": [[]] }, { "id": "60514233.8d78fc", "type": "debug", "z": "697b1fc6.229cd", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 960, "y": 180, "wires": [] }, { "id": "949b69d8.1b44d8", "type": "data-mapper", "z": "6554f7ca.486708", "name": "", "x": 430, "y": 220, "wires": [["516acccf.803544"], []] }, { "id": "3c770943.f40c76", "type": "function", "z": "6554f7ca.486708", "name": "", "func": "msg.aaa = [\n    {\n        hello: 123,\n    }\n];", "outputs": 1, "noerr": 0, "x": 230, "y": 200, "wires": [["949b69d8.1b44d8"]] }, { "id": "b04a5615.3a5cc8", "type": "inject", "z": "6554f7ca.486708", "name": "", "topic": "", "output_name": "", "payload": "", "payloadType": "date", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 100, "y": 120, "wires": [["3c770943.f40c76"]] }, { "id": "516acccf.803544", "type": "debug", "z": "6554f7ca.486708", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "bbb", "targetType": "msg", "x": 660, "y": 220, "wires": [] }, { "id": "59ec574d.38dcf8", "type": "inject", "z": "7e9b8868.0e5788", "name": "", "topic": "", "output_name": "inject", "payload": "", "payloadType": "date", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 120, "y": 400, "wires": [["5ddb9bb0.3a1a84"]] }, { "id": "5534bd1c.774ff4", "type": "template", "z": "7e9b8868.0e5788", "name": "signedXML", "field": "payload", "fieldType": "msg", "format": "html", "syntax": "mustache", "template": "<?xml version=\"1.0\" encoding=\"UTF-8\"?><EDoc><Msg ID=\"Edoc\" Type=\"IFCCTRNS\" Version=\"pacs.008.001.02.2017\"><Header><Sender>CBSBLT26XXX</Sender><Receiver>LIABLT2XMSD</Receiver><Priority>55</Priority><MsgId>SS18082800152902</MsgId><Date>2018-08-28T08:01:26</Date><System>LITAS-INST</System></Header><Docs><Doc><Header><DocId>SS18082800152902</DocId><Dates><Type>FormDoc</Type><Date>2018-08-28T08:01:26</Date></Dates><Type>IFCCTRNS</Type><Priority>55</Priority><BusinessArea>SEPAINST</BusinessArea></Header><Ifcctrns><Document><FIToFICstmrCdtTrf><GrpHdr><MsgId>SS18082800152902</MsgId><CreDtTm>2018-08-28T08:01:26</CreDtTm><NbOfTxs>1</NbOfTxs><TtlIntrBkSttlmAmt Ccy=\"EUR\">1.01</TtlIntrBkSttlmAmt><IntrBkSttlmDt>2018-08-28</IntrBkSttlmDt><SttlmInf><SttlmMtd>CLRG</SttlmMtd><ClrSys><Prtry>LITAS-INST</Prtry></ClrSys></SttlmInf><PmtTpInf><SvcLvl><Cd>SEPA</Cd></SvcLvl><LclInstrm><Cd>INST</Cd></LclInstrm></PmtTpInf><InstgAgt><FinInstnId><BIC>CBSBLT20XXX</BIC></FinInstnId></InstgAgt><InstdAgt><FinInstnId><BIC>LIABLT2XMSD</BIC></FinInstnId></InstdAgt></GrpHdr><CdtTrfTxInf><PmtId><InstrId>SS18082800152902</InstrId><EndToEndId>NOTPROVIDED</EndToEndId><TxId>SS18082800152902</TxId></PmtId><IntrBkSttlmAmt Ccy=\"EUR\">1.01</IntrBkSttlmAmt><AccptncDtTm>2018-08-28T08:01:26.684Z</AccptncDtTm><ChrgBr>SLEV</ChrgBr><Dbtr><Nm>Siauliu bnk</Nm></Dbtr><DbtrAcct><Id><IBAN>LT057189900000079919</IBAN></Id></DbtrAcct><DbtrAgt><FinInstnId><BIC>CBSBLT20XXX</BIC></FinInstnId></DbtrAgt><CdtrAgt><FinInstnId><BIC>INDULT20XXX</BIC></FinInstnId></CdtrAgt><Cdtr><Nm>Indu</Nm></Cdtr><CdtrAcct><Id><IBAN>LT307290000093702453</IBAN></Id></CdtrAcct><RmtInf><Ustrd>Testas</Ustrd></RmtInf></CdtTrfTxInf></FIToFICstmrCdtTrf></Document></Ifcctrns></Doc></Docs></Msg><ds:Signature xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\" Id=\"xmldsig-32af2e07-b9db-47d3-9e39-21ca217456f4\">\n<ds:SignedInfo>\n<ds:CanonicalizationMethod Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\"/>\n<ds:SignatureMethod Algorithm=\"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256\"/>\n<ds:Reference Id=\"xmldsig-32af2e07-b9db-47d3-9e39-21ca217456f4-ref0\" URI=\"\">\n<ds:Transforms>\n<ds:Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\"/>\n</ds:Transforms>\n<ds:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha256\"/>\n<ds:DigestValue>eFktLsoTU49PrJbGJMWyR4DmxRaTXCDMeDSKBBhwwHY=</ds:DigestValue>\n</ds:Reference>\n<ds:Reference Type=\"http://uri.etsi.org/01903#SignedProperties\" URI=\"#xmldsig-32af2e07-b9db-47d3-9e39-21ca217456f4-signedprops\">\n<ds:Transforms>\n<ds:Transform Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\"/>\n</ds:Transforms>\n<ds:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha256\"/>\n<ds:DigestValue>cthxoxhPt2Lp+DW1LqWW2mBJysapcXkLLiCPUwdSmhg=</ds:DigestValue>\n</ds:Reference>\n</ds:SignedInfo>\n<ds:SignatureValue Id=\"xmldsig-32af2e07-b9db-47d3-9e39-21ca217456f4-sigvalue\">\nyU9nJ88O4G9VLShxSdw8pU3PC8YKZqr9sactW01VkkRFLRTitHKhqDGUUc2Y7v4pBTged/cB5Xq6\nAfqSjsjYZJ57KvsuMHZCT+NHbYDuCBNmgWHKzKqPFX3AvoirtepDtka+SguhR8FGrvMUBHBRSvwC\nPAVytaQZCyJm6gsGkwQz7eai4e1g0jJMYIrLc0BpbEA6OihO5y36LBHKhNzFjm8PxcZSehUIFgLl\nIMdrCtMorf9qCzasxxd1Yprwny1saEMlKNiMjo62CfkXY2l9sSn65zle3yetoZyhdFA7YC/w4aEA\nwVuayqPYQLVE3E1mtG3h2zbkgZIGX9P0SPKj6g==\n</ds:SignatureValue>\n<ds:KeyInfo xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\">\n<ds:X509Data>\n<ds:X509Certificate>\nMIIFdjCCBF6gAwIBAgIKMrhqIgAAAAAVjDANBgkqhkiG9w0BAQUFADBdMQswCQYDVQQGEwJMVDEQ\nMA4GA1UEBxMHVmlsbml1czEYMBYGA1UEChMPTGlldHV2b3MgYmFua2FzMQwwCgYDVQQLEwNNU0Qx\nFDASBgNVBAMTC0xCLUxJVEFTLUNBMB4XDTE5MTAwODA2MTQxOFoXDTIxMTAwODA2MTQxOFowgZ0x\nMDAuBgoJkiaJk/IsZAEBDCA5NDRGRjQ5OUNGN0YwMUIyRTA1MzBBQzIwMTcwRjJGQTEUMBIGA1UE\nBRMLMDA5OS8wNzgvMDExCzAJBgNVBAYTAkxUMRAwDgYDVQQKDAdMQiBURVNUMRAwDgYDVQQLDAdM\nQiBURVNUMSIwIAYDVQQDDBlPUEVOQVggTElNSVRFRCBTUiBQUk9DRVNTMIIBIjANBgkqhkiG9w0B\nAQEFAAOCAQ8AMIIBCgKCAQEAzxW8qcF6e7J68hHtYP/rY95Be9S7owl+B04+kvgNApQ8Bg9F1A4D\nCEImlAQoaJ4DB0GxPi+IvbMQj8lkO5YinP/n0P9YWgh2R7KpFycNmW2qOaKZECcYNAes1NDcbdAC\nYlZyKfBFtYvkq3UjkOm9agSIsL+QICKmXhCBemq+S4S0sx8k7oGzVInC1sGzlmSwD/aDuMnpETJT\nzyHqisVvIl7xOAtyQYOzZTLAHs+XF+/hNXWEopWCxGk/6LymFMJu1EDjS3bjWXjbpr56BmZQdlU4\ngRb7xpQgGiE2U4IJBbpldg3ds3iHnQ3cacCiHYEevYSmij11hu2YapQ1Z2C9pQIDAQAFo4IB9TCC\nAfEwDgYDVR0PAQH/BAQDAgbAMIIBGwYDVR0gBIIBEjCCAQ4wggEKBgYEAI96AQIwgf8wgfwGCCsG\nAQUFBwICMIHvHoHsAFMAZQByAHQAaQBmAGkAawBhAHQAYQBzACAAbgBhAHUAZABvAGoAYQBtAGEA\ncwAgAHQAaQBrACAATABpAGUAdAB1AHYAbwBzACAAYgBhAG4AawBvACAAaQBuAGYAbwByAG0AYQBj\nAGkAbgEXAHMAZQAgAHMAaQBzAHQAZQBtAG8AcwBlAC4AIABGAG8AcgAgAHUAcwBhAGcAZQAgAGkA\nbgAgAHQAaABlACAASQBTACAAbwBmACAAdABoAGUAIABCAGEAbgBrACAAbwBmACAATABpAHQAaAB1\nAGEAbgBpAGEAIABvAG4AbAB5AC4wHQYDVR0OBBYEFGXonc0dl8GEhUfuIFDfJXypPLDlMB8GA1Ud\nIwQYMBaAFGCYgBf9iIkVmk22OnVwjPYOoFhzMDkGA1UdHwQyMDAwLqAsoCqGKGh0dHA6Ly93d3cu\nbGIubHQvcGtpL2NybC9MQi1MSVRBUy1DQS5jcmwwRQYIKwYBBQUHAQEEOTA3MDUGCCsGAQUFBzAC\nhilodHRwOi8vd3d3LmxiLmx0L3BraS9jZXJ0L0xCLUxJVEFTLUNBLmNydDANBgkqhkiG9w0BAQUF\nAAOCAQEAOsw6A4ez1AUMN4p10J37824DbUv5p1Ccw4bFYOHmDVP/mGGPHUbxrFHfnrJNxxG5DPaW\ndUVxv3kDvwpcJ3MiE0mJZFCTDhWXTFZgYi1i9WCBzL45cZ2MYwNZvxLUMm1hWs+DdvOZKIpW8RZK\n4cVKp+uD0JX168GcUP8Ss0yxDJD9yf5RxWRY4C69CXCtKWzd3yVnmLPOqPyoiUPDV+gCCXmbs+GT\nuQxHG21jWwJDD0WVs9XYT15A7pYva+sEOPcIs2QeQeeU81GYOo6DZXkbMHjbm5/vuP9mycE82da/\nj5X5KFbGXwql8GtqvxCWe8l43Sw3ei6vVTXLW8qlwLhyMg==\n</ds:X509Certificate>\n<ds:X509IssuerSerial>\n<ds:X509IssuerName>cn=LB-LITAS-CA,ou=MSD,o=Lietuvos bankas,l=Vilnius,c=LT</ds:X509IssuerName>\n<ds:X509SerialNumber>239520172728162046711180</ds:X509SerialNumber>\n</ds:X509IssuerSerial>\n<ds:X509SubjectName>cn=OPENAX LIMITED SR PROCESS,ou=LB TEST,o=LB TEST,c=LT,serialNumber=0099/078/01,uid=944FF499CF7F01B2E0530AC20170F2FA</ds:X509SubjectName>\n</ds:X509Data>\n</ds:KeyInfo>\n<ds:Object><xades:QualifyingProperties xmlns:xades=\"http://uri.etsi.org/01903/v1.3.2#\" xmlns:xades141=\"http://uri.etsi.org/01903/v1.4.1#\" Target=\"#xmldsig-32af2e07-b9db-47d3-9e39-21ca217456f4\"><xades:SignedProperties Id=\"xmldsig-32af2e07-b9db-47d3-9e39-21ca217456f4-signedprops\"><xades:SignedSignatureProperties><xades:SigningTime>2019-10-30T09:08:33.334Z</xades:SigningTime><xades:SigningCertificate><xades:Cert><xades:CertDigest><ds:DigestMethod Algorithm=\"http://www.w3.org/2001/04/xmlenc#sha256\"/><ds:DigestValue>pc02qUWZg2eM8Y3CiS19GOo4TRBz/XeQAmSZ2OqvyoA=</ds:DigestValue></xades:CertDigest><xades:IssuerSerial><ds:X509IssuerName>cn=LB-LITAS-CA,ou=MSD,o=Lietuvos bankas,l=Vilnius,c=LT</ds:X509IssuerName><ds:X509SerialNumber>239520172728162046711180</ds:X509SerialNumber></xades:IssuerSerial></xades:Cert></xades:SigningCertificate></xades:SignedSignatureProperties></xades:SignedProperties></xades:QualifyingProperties><QualifyingPropertiesReference xmlns=\"http://uri.etsi.org/01903/v1.3.2#\" URI=\"http://www.lb.lt/pki/crl/?pc02qUWZg2eM8Y3CiS19GOo4TRBz/XeQAmSZ2OqvyoA=\"/></ds:Object>\n</ds:Signature></EDoc>", "output": "str", "template_type": "", "template_id": "", "input_name": "TemplateTest", "subject_input_name": "", "account_id_input_name": "", "language": "", "x": 850, "y": 160, "wires": [["c9569154.5ebdd"]] }, { "id": "7e3156e6.554438", "type": "random", "z": "7e9b8868.0e5788", "name": "Randon Message Id", "low": "10000000000000", "high": "99999999999999", "inte": "true", "property": "MsgId", "x": 340, "y": 300, "wires": [["1ade59a2.c044d6"]] }, { "id": "51d134f6.57c3ec", "type": "http request", "z": "7e9b8868.0e5788", "name": "signXML", "method": "POST", "ret": "txt", "paytoqs": false, "url": "http://ec2-18-218-22-199.us-east-2.compute.amazonaws.com:8000/test", "tls": "", "proxy": "", "authType": "basic", "x": 800, "y": 300, "wires": [["c9569154.5ebdd", "16f811c2.a4f55e"]] }, { "id": "32939e3b.b543f2", "type": "debug", "z": "7e9b8868.0e5788", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 1120, "y": 600, "wires": [] }, { "id": "c9569154.5ebdd", "type": "http request", "z": "7e9b8868.0e5788", "name": "submit XML to BoL via Gateway", "method": "POST", "ret": "txt", "paytoqs": false, "url": "http://178.32.48.24/_bin/fusion.dll", "tls": "", "proxy": "", "authType": "basic", "x": 1150, "y": 320, "wires": [["32939e3b.b543f2"]] }, { "id": "89df2ee4.aad98", "type": "file", "z": "7e9b8868.0e5788", "name": "Add the File on Input CSM", "filename": "bbbb.xml", "input_name": "payload", "dirname": "/mnt/sharedfolder/DPS/Input", "appendNewline": true, "createDir": false, "overwriteFile": "true", "encoding": "none", "x": 1280, "y": 400, "wires": [["32939e3b.b543f2"]] }, { "id": "a74559cf.f246d8", "type": "template", "z": "7e9b8868.0e5788", "name": "FFPCRQST TEMPLATE TEST INJECT camt.056 recall", "field": "payload", "fieldType": "msg", "format": "html", "syntax": "mustache", "template": "<Msg ID=\"Edoc\" Type=\"PRTRN\" Version=\"pacs.004.001.02.2019\">\n    <Header>\n        <Sender>OPEXGB22XXX</Sender>\n        <Receiver>LIABLT2XMSD</Receiver>\n        <Priority>51</Priority>\n        <MsgId>54241479989621</MsgId>\n        <Date>2019-10-18T14:40:49</Date>\n        <System>LITAS-MIG</System>\n    </Header>\n    <Docs>\n        <Doc>\n            <Header>\n                <DocId>54241479989621</DocId>\n                <Dates>\n                    <Type>FormDoc</Type>\n                    <Date>2019-10-18T14:40:49</Date>\n                </Dates>\n                <Type>PRTRN</Type>\n                <Priority>51</Priority>\n                <BusinessArea>SEPASCT</BusinessArea>\n            </Header>\n            <Prtrn>\n                <Document>\n                    <PmtRtr>\n                        <GrpHdr>\n                            <MsgId>54241479989621</MsgId>\n                            <CreDtTm>2019-10-18T14:40:49</CreDtTm>\n                            <NbOfTxs>1</NbOfTxs>\n                            <TtlRtrdIntrBkSttlmAmt Ccy=\"EUR\">15</TtlRtrdIntrBkSttlmAmt>\n                            <IntrBkSttlmDt>2019-10-18</IntrBkSttlmDt>\n                            <SttlmInf>\n                                <SttlmMtd>CLRG</SttlmMtd>\n                                <ClrSys>\n                                    <Prtry>LITAS-MIG</Prtry>\n                                </ClrSys>\n                            </SttlmInf>\n                            <InstgAgt>\n                                <FinInstnId>\n                                    <BIC>OPEXGB22XXX</BIC>\n                                </FinInstnId>\n                            </InstgAgt>\n                        </GrpHdr>\n                        <TxInf>\n                            <RtrId>54241479989621</RtrId>\n                            <OrgnlGrpInf>\n                                <OrgnlMsgId>txid.2019-10-17.17:24:34.9d23a7a</OrgnlMsgId>\n                                <OrgnlMsgNmId>pacs.008.001.02</OrgnlMsgNmId>\n                            </OrgnlGrpInf>\n                            <OrgnlEndToEndId>NOTPROVIDED</OrgnlEndToEndId>\n                            <OrgnlTxId>txid.2019-10-17.17:24:34.9d23a7a</OrgnlTxId>\n                            <OrgnlIntrBkSttlmAmt Ccy=\"EUR\">15</OrgnlIntrBkSttlmAmt>\n                            <RtrdIntrBkSttlmAmt Ccy=\"EUR\">15</RtrdIntrBkSttlmAmt>\n                            <ChrgBr>SLEV</ChrgBr>\n                            <RtrRsnInf>\n                                <Orgtr>\n                                    <Id>\n                                        <OrgId>\n                                            <BICOrBEI>OPEXGB22XXX</BICOrBEI>\n                                        </OrgId>\n                                    </Id>\n                                </Orgtr>\n                                <Rsn>\n                                    <Cd>AC06</Cd>\n                                </Rsn>\n                            </RtrRsnInf>\n                            <OrgnlTxRef>\n                                <IntrBkSttlmDt>2019-10-18</IntrBkSttlmDt>\n                                <SttlmInf>\n                                    <SttlmMtd>CLRG</SttlmMtd>\n                                    <ClrSys>\n                                        <Prtry />\n                                    </ClrSys>\n                                </SttlmInf>\n                                <PmtTpInf>\n                                    <SvcLvl>\n                                        <Cd>SEPA</Cd>\n                                    </SvcLvl>\n                                </PmtTpInf>\n                                <Dbtr>\n                                    <Nm>SATP Inc.</Nm>\n                                </Dbtr>\n                                <DbtrAcct>\n                                    <Id>\n                                        <IBAN>FR7612345678900001234567858</IBAN>\n                                    </Id>\n                                </DbtrAcct>\n                                <DbtrAgt>\n                                    <FinInstnId>\n                                        <BIC>SATPFRP0</BIC>\n                                    </FinInstnId>\n                                </DbtrAgt>\n                                <CdtrAgt>\n                                    <FinInstnId>\n                                        <BIC>OPEXGB22XXX</BIC>\n                                    </FinInstnId>\n                                </CdtrAgt>\n                                <Cdtr>\n                                    <Nm>Openax test</Nm>\n                                </Cdtr>\n                                <CdtrAcct>\n                                    <Id>\n                                        <IBAN>GB66OPEX00993067594455</IBAN>\n                                    </Id>\n                                </CdtrAcct>\n                            </OrgnlTxRef>\n                        </TxInf>\n                    </PmtRtr>\n                </Document>\n            </Prtrn>\n        </Doc>\n    </Docs>\n</Msg>\n", "output": "str", "template_type": "", "template_id": "", "input_name": "TemplateTest", "subject_input_name": "", "account_id_input_name": "", "language": "", "x": 660, "y": 660, "wires": [[]] }, { "id": "5dd802e7.26ed4c", "type": "template", "z": "7e9b8868.0e5788", "name": "withEdoc", "field": "payload", "fieldType": "msg", "format": "html", "syntax": "mustache", "template": "<EDoc>\n    <Header>\n        <Sender>OPEXGB22XXX</Sender>\n        <Receiver>LIABLT2XMSD</Receiver>\n        <Priority>51</Priority>\n        <MsgId>54241479989621</MsgId>\n        <Date>2019-10-18T14:40:49</Date>\n        <System>LITAS-MIG</System>\n    </Header>\n    <Docs>\n        <Doc>\n            <Header>\n                <DocId>54241479989621</DocId>\n                <Dates>\n                    <Type>FormDoc</Type>\n                    <Date>2019-10-18T14:40:49</Date>\n                </Dates>\n                <Type>PRTRN</Type>\n                <Priority>51</Priority>\n                <BusinessArea>SEPASCT</BusinessArea>\n            </Header>\n            <Prtrn>\n                <Document>\n                    <PmtRtr>\n                        <GrpHdr>\n                            <MsgId>54241479989621</MsgId>\n                            <CreDtTm>2019-10-18T14:40:49</CreDtTm>\n                            <NbOfTxs>1</NbOfTxs>\n                            <TtlRtrdIntrBkSttlmAmt Ccy=\"EUR\">15</TtlRtrdIntrBkSttlmAmt>\n                            <IntrBkSttlmDt>2019-10-18</IntrBkSttlmDt>\n                            <SttlmInf>\n                                <SttlmMtd>CLRG</SttlmMtd>\n                                <ClrSys>\n                                    <Prtry>LITAS-MIG</Prtry>\n                                </ClrSys>\n                            </SttlmInf>\n                            <InstgAgt>\n                                <FinInstnId>\n                                    <BIC>OPEXGB22XXX</BIC>\n                                </FinInstnId>\n                            </InstgAgt>\n                        </GrpHdr>\n                        <TxInf>\n                            <RtrId>54241479989621</RtrId>\n                            <OrgnlGrpInf>\n                                <OrgnlMsgId>txid.2019-10-17.17:24:34.9d23a7a</OrgnlMsgId>\n                                <OrgnlMsgNmId>pacs.008.001.02</OrgnlMsgNmId>\n                            </OrgnlGrpInf>\n                            <OrgnlEndToEndId>NOTPROVIDED</OrgnlEndToEndId>\n                            <OrgnlTxId>txid.2019-10-17.17:24:34.9d23a7a</OrgnlTxId>\n                            <OrgnlIntrBkSttlmAmt Ccy=\"EUR\">15</OrgnlIntrBkSttlmAmt>\n                            <RtrdIntrBkSttlmAmt Ccy=\"EUR\">15</RtrdIntrBkSttlmAmt>\n                            <ChrgBr>SLEV</ChrgBr>\n                            <RtrRsnInf>\n                                <Orgtr>\n                                    <Id>\n                                        <OrgId>\n                                            <BICOrBEI>OPEXGB22XXX</BICOrBEI>\n                                        </OrgId>\n                                    </Id>\n                                </Orgtr>\n                                <Rsn>\n                                    <Cd>AC06</Cd>\n                                </Rsn>\n                            </RtrRsnInf>\n                            <OrgnlTxRef>\n                                <IntrBkSttlmDt>2019-10-18</IntrBkSttlmDt>\n                                <SttlmInf>\n                                    <SttlmMtd>CLRG</SttlmMtd>\n                                    <ClrSys>\n                                        <Prtry />\n                                    </ClrSys>\n                                </SttlmInf>\n                                <PmtTpInf>\n                                    <SvcLvl>\n                                        <Cd>SEPA</Cd>\n                                    </SvcLvl>\n                                </PmtTpInf>\n                                <Dbtr>\n                                    <Nm>SATP Inc.</Nm>\n                                </Dbtr>\n                                <DbtrAcct>\n                                    <Id>\n                                        <IBAN>FR7612345678900001234567858</IBAN>\n                                    </Id>\n                                </DbtrAcct>\n                                <DbtrAgt>\n                                    <FinInstnId>\n                                        <BIC>SATPFRP0</BIC>\n                                    </FinInstnId>\n                                </DbtrAgt>\n                                <CdtrAgt>\n                                    <FinInstnId>\n                                        <BIC>OPEXGB22XXX</BIC>\n                                    </FinInstnId>\n                                </CdtrAgt>\n                                <Cdtr>\n                                    <Nm>Openax test</Nm>\n                                </Cdtr>\n                                <CdtrAcct>\n                                    <Id>\n                                        <IBAN>GB66OPEX00993067594455</IBAN>\n                                    </Id>\n                                </CdtrAcct>\n                            </OrgnlTxRef>\n                        </TxInf>\n                    </PmtRtr>\n                </Document>\n            </Prtrn>\n        </Doc>\n    </Docs>\n</EDoc>\n", "output": "str", "template_type": "", "template_id": "", "input_name": "TemplateTest", "subject_input_name": "", "account_id_input_name": "", "language": "", "x": 520, "y": 540, "wires": [[]] }, { "id": "abfd9ea3.1574", "type": "http in", "z": "7e9b8868.0e5788", "name": "", "model": "", "required_fields": [], "available_fields": [], "url": "/jjjj", "api_url": "", "api_output": "{}", "method": "get", "layout": "", "upload": false, "must_log_in": false, "must_be_active_account": false, "verify_captcha": false, "security_enabled": false, "api_enabled": false, "api_category": "", "description": "", "security_type": "", "swaggerDoc": "", "x": 100, "y": 280, "wires": [["7e3156e6.554438"]] }, { "id": "16f811c2.a4f55e", "type": "http response", "z": "7e9b8868.0e5788", "name": "", "statusCode": "", "headers": { "Content-Type": "text/xml" }, "output_name": "payload", "output_template_name": "", "output_template_layout_name": "", "x": 1230, "y": 160, "wires": [] }, { "id": "e160e4b8.e909c8", "type": "template", "z": "7e9b8868.0e5788", "name": "spaceLess", "field": "payload", "fieldType": "msg", "format": "html", "syntax": "mustache", "template": "<?xml version=\"1.0\" encoding=\"UTF-8\"?><EDoc><Msg ID=\"Edoc\" Type=\"IFCCTRNS\" Version=\"pacs.008.001.02.2017\"><Header><Sender>CBSBLT26XXX</Sender><Receiver>LIABLT2XMSD</Receiver><Priority>55</Priority><MsgId>SS18082800152902</MsgId><Date>2018-08-28T08:01:26</Date><System>LITAS-INST</System></Header><Docs><Doc><Header><DocId>SS18082800152902</DocId><Dates><Type>FormDoc</Type><Date>2018-08-28T08:01:26</Date></Dates><Type>IFCCTRNS</Type><Priority>55</Priority><BusinessArea>SEPAINST</BusinessArea></Header><Ifcctrns><Document><FIToFICstmrCdtTrf><GrpHdr><MsgId>SS18082800152902</MsgId><CreDtTm>2018-08-28T08:01:26</CreDtTm><NbOfTxs>1</NbOfTxs><TtlIntrBkSttlmAmt Ccy=\"EUR\">1.01</TtlIntrBkSttlmAmt><IntrBkSttlmDt>2018-08-28</IntrBkSttlmDt><SttlmInf><SttlmMtd>CLRG</SttlmMtd><ClrSys><Prtry>LITAS-INST</Prtry></ClrSys></SttlmInf><PmtTpInf><SvcLvl><Cd>SEPA</Cd></SvcLvl><LclInstrm><Cd>INST</Cd></LclInstrm></PmtTpInf><InstgAgt><FinInstnId><BIC>CBSBLT20XXX</BIC></FinInstnId></InstgAgt><InstdAgt><FinInstnId><BIC>LIABLT2XMSD</BIC></FinInstnId></InstdAgt></GrpHdr><CdtTrfTxInf><PmtId><InstrId>SS18082800152902</InstrId><EndToEndId>NOTPROVIDED</EndToEndId><TxId>SS18082800152902</TxId></PmtId><IntrBkSttlmAmt Ccy=\"EUR\">1.01</IntrBkSttlmAmt><AccptncDtTm>2018-08-28T08:01:26.684Z</AccptncDtTm><ChrgBr>SLEV</ChrgBr><Dbtr><Nm>Siauliu bnk</Nm></Dbtr><DbtrAcct><Id><IBAN>LT057189900000079919</IBAN></Id></DbtrAcct><DbtrAgt><FinInstnId><BIC>CBSBLT20XXX</BIC></FinInstnId></DbtrAgt><CdtrAgt><FinInstnId><BIC>INDULT20XXX</BIC></FinInstnId></CdtrAgt><Cdtr><Nm>Indu</Nm></Cdtr><CdtrAcct><Id><IBAN>LT307290000093702453</IBAN></Id></CdtrAcct><RmtInf><Ustrd>Testas</Ustrd></RmtInf></CdtTrfTxInf></FIToFICstmrCdtTrf></Document></Ifcctrns></Doc></Docs></Msg></EDoc>", "output": "str", "template_type": "", "template_id": "", "input_name": "TemplateTest", "subject_input_name": "", "account_id_input_name": "", "language": "", "x": 590, "y": 460, "wires": [["51d134f6.57c3ec"]] }, { "id": "5ddb9bb0.3a1a84", "type": "function", "z": "7e9b8868.0e5788", "name": "", "func": "//msg.headers = {\"Content-Type\": \"text/xml\"}\nmsg.headers = {}", "outputs": 1, "noerr": 0, "x": 270, "y": 440, "wires": [["7e3156e6.554438"]] }, { "id": "a13c6074.d82c1", "type": "sequelizeExplorer", "z": "7e9b8868.0e5788", "name": "Data Explorer ", "output_name": "", "search": "", "model": "Beneficiary", "config": "{}", "mode": "", "records": ["e36c0ce4-3260-4242-947c-eafb52ad9070", "26bd5251-869f-468a-911a-15f34eb2744e", "b8b0e1da-1bd5-4e57-abc6-8f2f5d386176", "47f4719c-4f20-4ee8-8819-e0fe42e3af29", "22aa9f5b-26dc-4289-a247-4229d2576ecc", "af57e569-91e9-4ba3-ad09-6da3791ca0c8", "3685c309-7fa3-4bd0-a488-6baf23261ead", "48904d6f-b14f-415c-9d5d-b06393000246"], "x": 320, "y": 100, "wires": [["81b98645.921578"], ["ab0d0ca.03446f"]] }, { "id": "edf86e40.3ab1c", "type": "inject", "z": "7e9b8868.0e5788", "name": "", "topic": "", "output_name": "", "payload": "", "payloadType": "date", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 100, "y": 100, "wires": [["a13c6074.d82c1"]] }, { "id": "81b98645.921578", "type": "debug", "z": "7e9b8868.0e5788", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 600, "y": 40, "wires": [] }, { "id": "ab0d0ca.03446f", "type": "debug", "z": "7e9b8868.0e5788", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 600, "y": 120, "wires": [] }, { "id": "1ade59a2.c044d6", "type": "template", "z": "7e9b8868.0e5788", "name": "realXML?", "field": "payload", "fieldType": "msg", "format": "html", "syntax": "mustache", "template": "<EDoc><Msg ID=\"Edoc\" Type=\"FFCCTRNS\" Version=\"pacs.008.001.02.2019\"><Header><Sender>OPEXGB22XXX</Sender><Receiver>LIABLT2XMSD</Receiver><Priority>51</Priority><MsgId>1572508144613</MsgId><Date>2019-10-31T07:49:04</Date><System>LITAS-MIG</System></Header><Docs><Doc><Header><DocId>1572508144613</DocId><Dates><Type>FormDoc</Type><Date>2019-10-31T07:49:04</Date></Dates><Type>FFCCTRNS</Type><Priority>51</Priority><BusinessArea>SEPASCT</BusinessArea></Header><Ffcctrns><Document><FIToFICstmrCdtTrf><GrpHdr><MsgId>1572508144613</MsgId><CreDtTm>2019-10-31T07:49:04</CreDtTm><NbOfTxs>1</NbOfTxs><TtlIntrBkSttlmAmt Ccy=\"EUR\">3</TtlIntrBkSttlmAmt><IntrBkSttlmDt>2019-10-31</IntrBkSttlmDt><SttlmInf><SttlmMtd>CLRG</SttlmMtd><ClrSys><Prtry>LITAS-MIG</Prtry></ClrSys></SttlmInf><InstgAgt><FinInstnId><BIC>OPEXGB22XXX</BIC></FinInstnId></InstgAgt></GrpHdr><CdtTrfTxInf><PmtId><InstrId>1572508144613</InstrId><EndToEndId>NOTPROVIDED</EndToEndId><TxId>1572508144613</TxId></PmtId><PmtTpInf><SvcLvl><Cd>SEPA</Cd></SvcLvl></PmtTpInf><IntrBkSttlmAmt Ccy=\"EUR\">3</IntrBkSttlmAmt><ChrgBr>SLEV</ChrgBr><Dbtr><Nm>Openax Test</Nm><PstlAdr><Ctry>FR</Ctry><AdrLine>Av Victor Hugo</AdrLine></PstlAdr></Dbtr><DbtrAcct><Id><IBAN>GB66OPEX00993067594455</IBAN></Id></DbtrAcct><DbtrAgt><FinInstnId><BIC>OPEXGB22XXX</BIC></FinInstnId></DbtrAgt><CdtrAgt><FinInstnId><BIC>PYMXMTMTXXX</BIC></FinInstnId></CdtrAgt><Cdtr><Nm>Paymix Ltd</Nm></Cdtr><CdtrAcct><Id><IBAN>MT61PYMX09014000000407910100001</IBAN></Id></CdtrAcct><RmtInf><Ustrd>tekstas</Ustrd></RmtInf></CdtTrfTxInf></FIToFICstmrCdtTrf></Document></Ffcctrns></Doc></Docs></Msg></EDoc>", "output": "str", "template_type": "", "template_id": "", "input_name": "TemplateTest", "subject_input_name": "", "account_id_input_name": "", "language": "", "x": 580, "y": 300, "wires": [["51d134f6.57c3ec"]] }, { "id": "95e96e0b.1780c", "type": "sequelizeExplorer", "z": "db6746ca.3bb998", "name": "Data Explorer", "output_name": "payload", "search": "", "model": "Account", "config": "{}", "mode": "", "records": [], "x": 1080, "y": 340, "wires": [[], []] }, { "id": "c9536a87.ff3288", "type": "actionflows", "z": "cddc4c9.e35f1b", "info": "Describe your action API here.", "untilproptype": "num", "proptype": "msg", "name": "testing", "prop": "loop", "untilprop": 0, "until": "gt", "loop": "none", "scope": "global", "perf": false, "seq": false, "x": 650, "y": 320, "wires": [["580b3431.b6881c"]] }, { "id": "3775d3e6.bec8dc", "type": "actionflows_in", "z": "cddc4c9.e35f1b", "name": "testing", "priority": "50", "links": [], "scope": "global", "x": 260, "y": 380, "wires": [["7595917b.88cb4", "7b3a0533.72093c"]] }, { "id": "7698fbff.c80b64", "type": "inject", "z": "cddc4c9.e35f1b", "name": "", "topic": "", "output_name": "", "payload": "", "payloadType": "date", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 410, "y": 320, "wires": [["9e06978c.57f3a8", "c9536a87.ff3288"]] }, { "id": "7595917b.88cb4", "type": "debug", "z": "cddc4c9.e35f1b", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 560, "y": 400, "wires": [] }, { "id": "9e06978c.57f3a8", "type": "debug", "z": "cddc4c9.e35f1b", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 620, "y": 240, "wires": [] }, { "id": "580b3431.b6881c", "type": "debug", "z": "cddc4c9.e35f1b", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 920, "y": 180, "wires": [] }, { "id": "7b3a0533.72093c", "type": "actionflows_out", "z": "cddc4c9.e35f1b", "name": "testing", "links": [], "x": 590, "y": 540, "wires": [] }, { "id": "905f1d1f.7fe12", "type": "sequelizeExplorer", "z": "cddc4c9.e35f1b", "name": "Data Explorer", "output_name": "payload", "search": "", "model": "Beneficiary", "config": "{}", "mode": "", "records": [], "x": 1080, "y": 460, "wires": [[], []] }, { "id": "f18fd9ca.d2de48", "type": "http request", "z": "cddc4c9.e35f1b", "name": "", "method": "GET", "ret": "txt", "paytoqs": false, "url": "", "persist": false, "authType": "", "x": 1060, "y": 400, "wires": [[]] }, { "id": "dc3c20b6.dd3b4", "type": "http in", "z": "3442de01.81b042", "name": "", "model": "", "required_fields": [], "available_fields": [], "url": "/aaron", "api_url": "", "api_output": "{}", "method": "get", "layout": "", "upload": false, "must_log_in": false, "must_be_active_account": false, "verify_captcha": false, "security_enabled": false, "api_enabled": false, "api_category": "", "description": "", "security_type": "", "swaggerDoc": "", "x": 350, "y": 220, "wires": [["bda3cecf.45172", "d5118c05.fae1d"]] }, { "id": "61ede11.ba0262", "type": "http response", "z": "3442de01.81b042", "name": "", "statusCode": "", "headers": {}, "output_name": "payload", "output_template_name": "", "output_template_layout_name": "", "x": 630, "y": 260, "wires": [] }, { "id": "bda3cecf.45172", "type": "change", "z": "3442de01.81b042", "name": "", "rules": [{ "t": "set", "p": "payload", "pt": "msg", "to": "hello world", "tot": "str" }], "action": "", "property": "", "from": "", "to": "", "reg": false, "x": 530, "y": 160, "wires": [["61ede11.ba0262"]] }, { "id": "d5118c05.fae1d", "type": "debug", "z": "3442de01.81b042", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 800, "y": 120, "wires": [] }, { "id": "1b3d6fba.9ea99", "type": "http in", "z": "3442de01.81b042", "name": "", "model": "", "required_fields": [], "available_fields": [], "url": "/dis/SendResult.aspx", "api_url": "", "api_output": "{}", "method": "post", "layout": "", "upload": false, "must_log_in": false, "must_be_active_account": false, "verify_captcha": false, "security_enabled": false, "api_enabled": false, "api_category": "", "description": "", "security_type": "", "swaggerDoc": "", "x": 400, "y": 460, "wires": [["5fa61b40.16a8d4", "d5ef66a2.fc28a8"]] }, { "id": "db2033c1.1a655", "type": "http response", "z": "3442de01.81b042", "name": "", "statusCode": "", "headers": {}, "output_name": "payload", "output_template_name": "", "output_template_layout_name": "", "x": 630, "y": 500, "wires": [] }, { "id": "5fa61b40.16a8d4", "type": "change", "z": "3442de01.81b042", "name": "", "rules": [{ "t": "set", "p": "payload", "pt": "msg", "to": "hello world", "tot": "str" }], "action": "", "property": "", "from": "", "to": "", "reg": false, "x": 530, "y": 400, "wires": [["db2033c1.1a655"]] }, { "id": "d5ef66a2.fc28a8", "type": "debug", "z": "3442de01.81b042", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 800, "y": 360, "wires": [] }, { "id": "6e24c105.d2d2", "type": "http in", "z": "3442de01.81b042", "name": "", "model": "", "required_fields": [], "available_fields": [], "url": "/dis/SendResult.aspx", "api_url": "", "api_output": "{}", "method": "get", "layout": "", "upload": false, "must_log_in": false, "must_be_active_account": false, "verify_captcha": false, "security_enabled": false, "api_enabled": false, "api_category": "", "description": "", "security_type": "", "swaggerDoc": "", "x": 330, "y": 540, "wires": [["5fa61b40.16a8d4", "d5ef66a2.fc28a8"]] }, { "id": "3bbc9eda.5b1a82", "type": "http request", "z": "3442de01.81b042", "name": "", "method": "GET", "input_name": "input", "output_name": "output", "ret": "txt", "paytoqs": false, "url": "https://jsonplaceholder.typicode.com/todos/1", "tls": "", "persist": false, "proxy": "", "authType": "", "x": 680, "y": 760, "wires": [["7aa8f226.27a3cc", "863650ba.8ce3e"]] }, { "id": "a1974207.41243", "type": "inject", "z": "3442de01.81b042", "name": "", "topic": "", "output_name": "", "payload": "", "payloadType": "date", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 400, "y": 740, "wires": [["3bbc9eda.5b1a82"]] }, { "id": "7aa8f226.27a3cc", "type": "debug", "z": "3442de01.81b042", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 930, "y": 640, "wires": [] }, { "id": "863650ba.8ce3e", "type": "debug", "z": "3442de01.81b042", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "output", "targetType": "msg", "x": 940, "y": 840, "wires": [] }, { "id": "d8c9474e.8020f8", "type": "http request", "z": "962e59be.08d978", "name": "signXML", "method": "POST", "input_name": "Edoc", "output_name": "signedXml", "ret": "txt", "paytoqs": false, "url": "http://147.234.51.78:8080/verify", "tls": "", "persist": false, "proxy": "", "authType": "basic", "x": 560, "y": 380, "wires": [["f627f418.baa978"]] }, { "id": "f7af6c45.75e95", "type": "inject", "z": "962e59be.08d978", "name": "", "topic": "", "output_name": "", "payload": "", "payloadType": "date", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 140, "y": 420, "wires": [["87ebeef8.b315"]] }, { "id": "f627f418.baa978", "type": "debug", "z": "962e59be.08d978", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "signedXml", "targetType": "msg", "x": 730, "y": 260, "wires": [] }, { "id": "87ebeef8.b315", "type": "template", "z": "962e59be.08d978", "name": "MsgNext", "field": "Edoc", "fieldType": "msg", "format": "handlebars", "syntax": "mustache", "template": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<EDoc><Msg ID=\"Edoc\" Type=\"BALANCE\" Version=\"2007-1-0\"><Header><Sender>LIABLT2XMSD</Sender><Receiver>OPEXGB22XXX</Receiver><Priority>35</Priority><MsgId>S193050006298227</MsgId><Date>2019-11-01T17:19:31</Date><System>LITAS-PHA</System></Header><Docs><Doc><Header><DocId>O193050019394021</DocId><Dates><Type>FormDoc</Type><Date>2019-11-01T17:19:31</Date></Dates><Type>CBALPAT</Type><Priority>35</Priority><BusinessArea>EOD</BusinessArea></Header><CBalPat><BIC>OPEXGB22XXX</BIC><AccountType>ATSISK</AccountType><Account>LT321020103000030085</Account><Currency>EUR</Currency><Opening><Balance>1.4</Balance><AvailableBalance>0</AvailableBalance></Opening><Closing><Balance>1.4</Balance><AvailableBalance>0</AvailableBalance></Closing></CBalPat></Doc></Docs></Msg><Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\" Id=\"DS_678B7AD8C4894CDEA714F2013E3F3330\"><SignedInfo><CanonicalizationMethod Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\"/><SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\"/><Reference URI=\"\"><Transforms><Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\"/></Transforms><DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/><DigestValue>iTqce/D+FwYKNFViJ4MqSqHZ6VM=</DigestValue></Reference><Reference URI=\"#SP_678B7AD8C4894CDEA714F2013E3F3330\" Type=\"http://uri.etsi.org/01903/v1.1.1#SignedProperties\"><DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/><DigestValue>v76fl4wg1cezFSUnvcdlQpvdgPQ=</DigestValue></Reference></SignedInfo><SignatureValue>/9aBqiDpWENRG6fklV0uRUlB9MxbLSaBq4LKQ76TuKu4rRC88FRUx9pgIn1A/E2Qvme4w5oaijMVR5AkpoT0AssagbSyP0lS2lOwLcvK+jEQxS89iwXCF4nWfovI+iDx/tchnF7WPeP7I7/WGwyUBuwWZBHHteyC5NSEloLMmYh8mo96tci1lW3Nt93CVYZnF7QSX2fj0rZ/0qvvxDskcNDr3+D1b4N65v8f5JPXTCdL1vGUkY/R9yDU0K+Hx0uT1X0cKNZjfk3dBZUsOe6mBBwCK2BK2+3qy0H6PT0WQ4LI3Dm1lLZRIfp8FjMqtvNZUm8A+ahEImtBPac7aXI1Mw==</SignatureValue><ds:Object xmlns=\"http://uri.etsi.org/01903/v1.1.1#\" xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"><QualifyingPropertiesReference URI=\"http://www.lb.lt/pki/cert/?8qgOegrfKqAjvODPkq7ctJm4YHc=\"/><QualifyingPropertiesReference URI=\"http://www.lb.lt/pki/crl/?0rZvGodZJFUNkexoszdv3yY/NQg=\"/><QualifyingProperties Target=\"#DS_678B7AD8C4894CDEA714F2013E3F3330\"><SignedProperties Id=\"SP_678B7AD8C4894CDEA714F2013E3F3330\"><SignedSignatureProperties><SigningTime>2019-11-01T17:20:06+02:00</SigningTime><SigningCertificate><Cert><CertDigest><DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/><DigestValue>8qgOegrfKqAjvODPkq7ctJm4YHc=</DigestValue></CertDigest><IssuerSerial><ds:X509IssuerName>C=LT, L=Vilnius, O=Lietuvos bankas, OU=MSD, CN=LB-LITAS-CA</ds:X509IssuerName><ds:X509SerialNumber>347599381669548201607413</ds:X509SerialNumber></IssuerSerial></Cert></SigningCertificate><SignaturePolicyIdentifier><SignaturePolicyImplied/></SignaturePolicyIdentifier></SignedSignatureProperties></SignedProperties><UnsignedProperties><UnsignedSignatureProperties><SignatureTimeStamp><HashDataInfo uri=\"#DS_678B7AD8C4894CDEA714F2013E3F3330\"><Transforms><ds:Transform Algorithm=\"http://www.w3.org/TR/1999/REC-xpath-19991116\"><ds:XPath xmlns:dsig=\"http://www.w3.org/2000/09/xmldsig#\">ancestor-or-self::dsig:SignatureValue</ds:XPath></ds:Transform></Transforms></HashDataInfo><EncapsulatedTimeStamp Id=\"TST_0B4A34252418B6A5F4B49F0C860D95AEE891C7B3\">MIICZwYJKoZIhvcNAQcCoIICWDCCAlQCAQMxCzAJBgUrDgMCGgUAMGkGCyqGSIb3DQEJEAEEoFoEWDBWAgEBBgYEAM4PAQEwITAJBgUrDgMCGgUABBSG9fOt/BZYZmVDepLaslNRGAWt/gIQA42Fh6N+WbpMDQWkjBxf3xgPMjAxOTExMDExNTIwMDZaMAMCAQExggHVMIIB0QIBATBrMF0xCzAJBgNVBAYTAkxUMRAwDgYDVQQHEwdWaWxuaXVzMRgwFgYDVQQKEw9MaWV0dXZvcyBiYW5rYXMxDDAKBgNVBAsTA01TRDEUMBIGA1UEAxMLTEItTElUQVMtQ0ECCkmb8KUAAAAAAPYwCQYFKw4DAhoFAKBBMBoGCSqGSIb3DQEJAzENBgsqhkiG9w0BCRABBDAjBgkqhkiG9w0BCQQxFgQU12ynd0DSxLtEM94JfYcRnfAUQGswDQYJKoZIhvcNAQEBBQAEggEACLq4uHYLmpd2C5bjeBJsur3rrNgIzu+U8oeRRggoTAkqX+obcIxkBOhFXPutdK2DrBp4s+lU0Yed1p5IN8SzxVz+ztYEZklPe1jiZBgOQvSdwvW9Otsa6WGFeYAhCn3sWvp+Hxx2F+7Kx10MEsCrTUOk7PMipExFFBAEVrxcyaBvrRrmHoODntEVjaNmym5Ssf02llz8bSKo3w/8EhVHrHcDBaVNy3N1m+bvmzqh/ZphU5klqfrQYEk64xE1+F+e8tOO1dh4AxQi+baFYF8+ZfTVbxsR6E3etQFienSA9Tg26YxpEQKGVfGtdfsgq2A4rWL92O3Xtq7t47I5BeKQMw==</EncapsulatedTimeStamp></SignatureTimeStamp></UnsignedSignatureProperties></UnsignedProperties></QualifyingProperties></ds:Object></Signature></EDoc>", "output": "str", "template_type": "", "template_id": "", "input_name": "payload", "subject_input_name": "", "account_id_input_name": "", "language": "", "x": 360, "y": 380, "wires": [["d8c9474e.8020f8"]] }, { "id": "8233e5aa.6293a8", "type": "inject", "z": "31e14e4c.223062", "name": "", "topic": "", "output_name": "", "payload": "", "payloadType": "date", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 160, "y": 140, "wires": [["9d0710f0.8bc23"]] }, { "id": "9d0710f0.8bc23", "type": "function", "z": "31e14e4c.223062", "name": "", "func": "msg.test1 = {\n    aaa: 123,\n    bbb: undefined,\n    ccc: undefined,\n}\n\nmsg.test2 = {\n    aaa: undefined,\n    bbb: 123,\n    ccc: undefined,\n}\n\nmsg.test3 = {\n    aaa: undefined,\n    bbb: undefined,\n    ccc: 123,\n}\n\nmsg.test4 = {\n    aaa: undefined,\n    bbb: 123,\n    ccc: 1234,\n}", "outputs": 1, "noerr": 0, "x": 380, "y": 160, "wires": [["894ff913.adc748", "f15ad637.6d0858", "6640cb48.d34854", "1f80d910.0039c7"]] }, { "id": "894ff913.adc748", "type": "advanced-conditions", "z": "31e14e4c.223062", "name": "", "rules": [{ "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test1.aaa" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test1.bbb" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test1.ccc" }], "type": "and" }], "outputs": 4, "x": 680, "y": 160, "wires": [["3a123f51.e6fb6"], ["253ab9fa.e48306"], ["35083a6d.7d7fb6"], ["ae2fb17c.8c464"]] }, { "id": "3a123f51.e6fb6", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test1", "targetType": "msg", "x": 970, "y": 80, "wires": [] }, { "id": "253ab9fa.e48306", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test1", "targetType": "msg", "x": 970, "y": 140, "wires": [] }, { "id": "35083a6d.7d7fb6", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test1", "targetType": "msg", "x": 970, "y": 220, "wires": [] }, { "id": "ae2fb17c.8c464", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test1", "targetType": "msg", "x": 970, "y": 300, "wires": [] }, { "id": "f15ad637.6d0858", "type": "advanced-conditions", "z": "31e14e4c.223062", "name": "", "rules": [{ "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test2.aaa" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test2.bbb" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test2.ccc" }], "type": "and" }], "outputs": 4, "x": 680, "y": 480, "wires": [["bc137c13.6b934"], ["50a32a3c.84a9f4"], ["1ddca9e3.bb3656"], ["df80c726.1f43b8"]] }, { "id": "bc137c13.6b934", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test2", "targetType": "msg", "x": 970, "y": 400, "wires": [] }, { "id": "50a32a3c.84a9f4", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test2", "targetType": "msg", "x": 970, "y": 460, "wires": [] }, { "id": "1ddca9e3.bb3656", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test2", "targetType": "msg", "x": 970, "y": 540, "wires": [] }, { "id": "df80c726.1f43b8", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test2", "targetType": "msg", "x": 970, "y": 620, "wires": [] }, { "id": "6640cb48.d34854", "type": "advanced-conditions", "z": "31e14e4c.223062", "name": "", "rules": [{ "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test3.aaa" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test3.bbb" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test3.ccc" }], "type": "and" }], "outputs": 4, "x": 680, "y": 820, "wires": [["a1cd8a30.79e7b8"], ["9ef968fc.504d68"], ["7535626a.f9be5c"], ["635c5311.bcfc9c"]] }, { "id": "a1cd8a30.79e7b8", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test3", "targetType": "msg", "x": 970, "y": 740, "wires": [] }, { "id": "9ef968fc.504d68", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test3", "targetType": "msg", "x": 970, "y": 800, "wires": [] }, { "id": "7535626a.f9be5c", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test3", "targetType": "msg", "x": 970, "y": 860, "wires": [] }, { "id": "635c5311.bcfc9c", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test3", "targetType": "msg", "x": 970, "y": 920, "wires": [] }, { "id": "1f80d910.0039c7", "type": "advanced-conditions", "z": "31e14e4c.223062", "name": "", "rules": [{ "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test4.aaa" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test4.bbb" }], "type": "and" }, { "conditions": [{ "open_input_source": false, "input_source": "msg", "output": "undefined", "open_output_type": false, "output_type": "jsonata", "comparison": "neq", "input": "test4.ccc" }], "type": "and" }], "outputs": 4, "x": 660, "y": 1100, "wires": [["989bbd77.b2ac"], ["9d7e1a35.2cfda8"], ["ae969d57.37dae"], ["935b2741.d418c8"]] }, { "id": "989bbd77.b2ac", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test4", "targetType": "msg", "x": 950, "y": 1020, "wires": [] }, { "id": "9d7e1a35.2cfda8", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test4", "targetType": "msg", "x": 950, "y": 1080, "wires": [] }, { "id": "ae969d57.37dae", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test4", "targetType": "msg", "x": 950, "y": 1140, "wires": [] }, { "id": "935b2741.d418c8", "type": "debug", "z": "31e14e4c.223062", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "test4", "targetType": "msg", "x": 950, "y": 1200, "wires": [] }, { "id": "cc35db81.2dc838", "type": "sequelizejs", "z": "31e14e4c.223062", "mode": "workflow", "name": "", "model": "", "raw_flag": false, "update_or_create_field": "", "output_name": "", "input_name": "", "config": "{}", "output_settings": {}, "x": 300, "y": 380, "wires": [[], []] }, { "id": "d32a2430.860fc8", "type": "http request", "z": "962e59be.08d978", "name": "signXML", "method": "GET", "input_name": "Edoc", "output_name": "payload", "ret": "txt", "paytoqs": false, "url": "https://www.google.com/search?q=what+is+my+ip", "tls": "", "persist": false, "proxy": "", "authType": "basic", "x": 720, "y": 460, "wires": [["1456db20.2036a5"]] }, { "id": "87372ba1.6690e8", "type": "inject", "z": "962e59be.08d978", "name": "", "topic": "", "output_name": "", "payload": "", "payloadType": "date", "repeat": "", "crontab": "", "once": false, "onceDelay": 0.1, "x": 620, "y": 540, "wires": [["d32a2430.860fc8"]] }, { "id": "1456db20.2036a5", "type": "debug", "z": "962e59be.08d978", "name": "", "active": true, "tosidebar": true, "console": true, "tostatus": true, "complete": "payload", "targetType": "msg", "x": 970, "y": 500, "wires": [] }];

    this.RegistryService.import(this.data);

  }

}



